- **CitaÃ§Ã£o**
  - **TÃ­tulo**: Pattern Matching in C#: A Simple Guide with Real-World Examples
  - **Autor**: Arunkumar
  - **Fonte**: Arunkumar Blog
  - **URL**: https://www.arungudelli.com/csharp-tips/pattern-matching-in-csharp/?utm_source=bonobopress&utm_medium=newsletter&utm_campaign=2044
  - **Atualizado**: 10 de abril de 2025

---

# CorrespondÃªncia de padrÃµes em C#: um guia simples com exemplos do mundo real

O C# evoluiu significativamente ao longo dos anos, e um dos seus recursos mais poderosos Ã© a **correspondÃªncia de padrÃµes**.

Recentemente, enquanto trabalhava em um pequeno projeto paralelo, me deparei com esta bela linha de cÃ³digo C#.

```c#
if (person is not null and { Age: > 18 })
{}
```

Parecia elegante. E, sinceramente, me fez parar para pensar.

Eu vinha escrevendo verificaÃ§Ãµes nulas e acessadores de propriedade da maneira clÃ¡ssica hÃ¡ anos:

```c#
if (person != null && person.Age > 18)
{}
```

Funcional? Sim. LegÃ­vel? Mais ou menos. Seguro? DiscutÃ­vel â€” especialmente quando as coisas ficam mais complexas.

EntÃ£o, decidi criar um [vÃ­deo](https://youtu.be/sNh1zM9vrFs) curto no YouTube sobre essa sintaxe moderna. Apenas uma explicaÃ§Ã£o divertida sobre como o C# agora permite combinar verificaÃ§Ãµes de nulos e acesso a propriedades em uma Ãºnica condiÃ§Ã£o limpa usando correspondÃªncia de padrÃµes.

Eu nÃ£o tinha ideia de que um vÃ­deo curto me levaria a explorar muito mais e me mostraria o quÃ£o Ãºtil e versÃ¡til a correspondÃªncia de padrÃµes Ã© no C# de hoje.

Esse recurso melhora a legibilidade, reduz o cÃ³digo repetitivo e permite um tratamento lÃ³gico mais expressivo.

Neste artigo, exploraremos os vÃ¡rios tipos de padrÃµes suportados em C#, como eles funcionam e quando usÃ¡-los, usando exemplos claros e reais.

## ğŸŒ± Tudo comeÃ§ou com `is`â€¦ [ #](#-it-all-started-with-is)

Minha curiosidade foi aguÃ§ada.

Eu jÃ¡ conhecia a palavra-chave bÃ¡sica `is` em C#. VocÃª provavelmente jÃ¡ viu isso milhares de vezes:

```c#
if (obj is string s)
{
    Console.WriteLine($"It's a string: {s}");
}
```

O que eu nÃ£o tinha percebido completamente era como a palavra-chave `is` evoluiu para lidar com tipos, condiÃ§Ãµes, propriedades e atÃ© mesmo formas complexas de objetos, tudo de uma vez.

## âœ¨ O que Ã© correspondÃªncia de padrÃµes? [#](#-o-que-e-correspondencia-de-padrÃµes)

A correspondÃªncia de padrÃµes Ã© um mecanismo que permite comparar um valor de entrada com um padrÃ£o e tomar medidas caso haja correspondÃªncia. Em C#, a correspondÃªncia de padrÃµes Ã© suportada nas seguintes construÃ§Ãµes:

- expressÃµes `is`
- instruÃ§Ãµes `switch`
- expressÃµes `switch`

C# suporta uma grande variedade de padrÃµes, que exploraremos um por um.

## ğŸ§¾ 1\. PadrÃµes de DeclaraÃ§Ã£o e Tipo [#](#-1-declaration-and-type-patterns)

Esses padrÃµes verificam o tipo de tempo de execuÃ§Ã£o de um objeto e, opcionalmente, o atribuem a uma nova variÃ¡vel.

**Exemplo:**

```c#
object item = "Welcome!";
if (item is string text)
{
    Console.WriteLine(text.ToUpper()); // Output: WELCOME!
}
```

Analogia do mundo real: imagine que um cliente Ã© um objeto. Se for um `PremiumCustomer`, podemos convertÃª-lo e aplicar regras especiais.

## ğŸ¯ 2\. PadrÃµes constantes [#](#-2-constant-patterns)

Use-os para comparar um valor diretamente com uma constante. Esta Ã© uma alternativa concisa a vÃ¡rias instruÃ§Ãµes `if`.

**Exemplo:**

```c#
int guests = 2;
string table = guests switch
{
    1 => "Single Table",
    2 => "Couple Booth",
    4 => "Family Table",
    _ => "Group Table"
};
```

Pense nisso como um restaurante que atribui mesas com base no nÃºmero de pessoas.

## ğŸ§® 3\. PadrÃµes Relacionais [#](#-3-relational-patterns)

Esses padrÃµes permitem que vocÃª verifique se um valor Ã© menor, maior ou igual a uma constante.

**Exemplo:**

```c#
double temperature = 35.2;

string category = temperature switch
{
    < 0 => "Freezing",
    >= 0 and < 20 => "Cold",
    >= 20 and <= 30 => "Warm",
    > 30 => "Hot",
    _ => "Unknown"
};
```

Ã“timo para cenÃ¡rios como categorizaÃ§Ã£o climÃ¡tica ou sistemas de classificaÃ§Ã£o.

## ğŸ”— 4\. PadrÃµes LÃ³gicos [#](#-4-padrÃµes-lÃ³gicos)

Combine padrÃµes usando `e`, `ou` e `nÃ£o`.

**Exemplo:**

```c#
int age = 25;
bool isYoungAdult = age is >= 18 and <= 30;
```

Use `not` para exclusÃµes:

```c#
if (user is not null)
{
    // user is valid
}
```

## PadrÃµes lÃ³gicos permitem Ã¡rvores de decisÃ£o mais complexas com menos ruÃ­do. [#](#logical-patterns-allow-for-more-complex-decision-trees-with-less-noise)

## ğŸ  5\. PadrÃµes de Propriedade [#](#-5-padrÃµes-de-propriedade)

CorrespondÃªncia com base nos valores das propriedades dentro de um objeto.

**Exemplo:**

```c#
var booking = new { RoomType = "Suite", Guests = 2 };

if (booking is { RoomType: "Suite", Guests: > 1 })
{
    Console.WriteLine("Apply luxury tax.");
}
```

Isso Ã© como inspecionar os campos de um registro para decidir aÃ§Ãµes.

## ğŸ§­ 6\. PadrÃµes Posicionais [#](#-6-positional-patterns)

Desconstrua objetos ou tuplas para corresponder a componentes individuais.

**Exemplo:**

```c#
(Point x, Point y) = (new(0, 0), new(1, 1));

string status = (x, y) switch
{
    (0, 0) => "At origin",
    (_, _) => "Somewhere else"
};
```

Funciona muito bem ao modelar coordenadas, intervalos ou sistemas de grade.

ğŸ‘‰ \*_Quer saber mais sobre como funciona a correspondÃªncia de padrÃµes posicionais e onde ela se destaca?_ \* [Leia este artigo detalhado sobre PadrÃµes Posicionais em C# â€“ O quÃª, Por quÃª e Como](/csharp-tips/positional-patterns-csharp/)

## ğŸ“¦ 7\. PadrÃ£o Var [#](#-7-var-padrÃ£o)

Use isto quando vocÃª nÃ£o se importa com o tipo e sÃ³ quer extrair o valor.

**Exemplo:**

```c#
if (GetData() is var data && data.Length > 0)
{
    Console.WriteLine("Data retrieved!");
}
```

Isso Ã© Ãºtil ao executar verificaÃ§Ãµes ou transformaÃ§Ãµes em tempo real.

## â›” 8\. Descartar PadrÃ£o [#](#-8-discard-pattern)

Use `_` para corresponder a qualquer coisa quando o valor especÃ­fico for irrelevante.

**Exemplo:**

```c#
string GetDayStatus(DayOfWeek? day) => day switch
{
    DayOfWeek.Monday => "Start of week",
    DayOfWeek.Friday => "Almost weekend",
    _ => "Another day"
};
```

Ãštil para soluÃ§Ãµes alternativas abrangentes.

## ğŸ“‹ 9\. PadrÃµes de Lista (C# 11+) [#](#-9-list-patterns-c-11)

Permite verificar sequÃªncias (como matrizes/listas) com padrÃµes aninhados.

**Exemplo:**

```c#
int[] ratings = { 5, 4, 3 };

if (ratings is [5, .., >= 3])
{
    Console.WriteLine("Great feedback!");
}
```

VocÃª tambÃ©m pode extrair fatias usando `.. `.

```c#
if (ratings is [_, .. var middle, _])
{
    Console.WriteLine($"Middle scores: {string.Join(", ", middle)}");
}
```

Ãštil para validar entradas estruturadas, como notas de exames, matrizes de configuraÃ§Ã£o, etc.

## ğŸ“š Resumo [#](#-resumo)

| Tipo de padrÃ£o  | Melhor caso de uso                                  |
| --------------- | --------------------------------------------------- |
| DeclaraÃ§Ã£o/Tipo | VerificaÃ§Ã£o de tipo e conversÃ£o                     |
| Constante       | CorrespondÃªncia exata de valor                      |
| Relacional      | ComparaÃ§Ã£o de alcance                               |
| LÃ³gico          | CombinaÃ§Ãµes complexas                               |
| Propriedade     | CorrespondÃªncia de valores de propriedade do objeto |
| Posicional      | CorrespondÃªncia baseada na desconstruÃ§Ã£o            |
| Var             | ExtraÃ§Ã£o geral de valor                             |
| Descartar       | Corresponder a qualquer coisa, ignorar valor        |
| Lista           | CorrespondÃªncia de matrizes/listas e subsequÃªncias  |

## ğŸ¯ Quando vocÃª deve usar a correspondÃªncia de padrÃµes? [ #](#-quando-vocÃª-deve-usar-a-correspondÃªncia-de-padrÃµes)

Na minha experiÃªncia, a correspondÃªncia de padrÃµes brilha quando:

- VocÃª estÃ¡ trabalhando com tipos heterogÃªneos (por exemplo, parÃ¢metros `object`).
- VocÃª quer evitar verificaÃ§Ãµes de nulos detalhadas.
- VocÃª quer tornar os condicionais mais legÃ­veis.
- VocÃª estÃ¡ lidando com lÃ³gica de ramificaÃ§Ã£o complexa (por exemplo, transformando respostas de API).

## ğŸ§  ConsideraÃ§Ãµes finais [ #](#-final-thoughts)

Quanto mais eu praticava, mais eu percebia: correspondÃªncia de padrÃµes em C# nÃ£o Ã© apenas um truque de sintaxe, Ã© uma mudanÃ§a de mentalidade.

Em vez de escrever a lÃ³gica como etapas procedimentais, vocÃª a descreve como formas e regras. VocÃª diz ao C# o que espera e deixa o compilador fazer o trabalho.

Quer vocÃª esteja criando analisadores, lÃ³gica de validaÃ§Ã£o ou apenas simplificando condicionais, a correspondÃªncia de padrÃµes pode ajudÃ¡-lo a escrever um cÃ³digo mais limpo e fÃ¡cil de manter.

Pronto para se aprofundar? Tente refatorar um dos seus blocos recentes com muitos switches ou aninhados em `if` em uma lÃ³gica elegante baseada em padrÃµes.

---
